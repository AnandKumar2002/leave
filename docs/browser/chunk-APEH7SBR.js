import{b as V,c as j,e as q,f as P,g as L,h as $}from"./chunk-2OV54QIK.js";import{a as E}from"./chunk-IYQM5MWB.js";import{$ as v,Ba as r,Gb as I,Hb as k,Ib as B,La as c,Lb as N,Mb as R,Na as d,Qa as i,Ra as t,Sa as S,T as b,Ua as A,Wa as g,Xa as f,aa as y,cb as a,db as h,eb as m,gb as w,hb as C,ib as M,kb as T,lb as F,mb as O,nb as _,ob as x}from"./chunk-CVYJNGOA.js";import"./chunk-FK42CRUA.js";var z=l=>({"bg-blue-50":l,"hover:bg-gray-100":!0}),G=(l,n,e)=>({"text-green-500":l,"text-yellow-500":n,"text-red-500":e});function J(l,n){if(l&1&&(i(0,"div"),a(1),t()),l&2){let e=n.$implicit;r(),m(" ",e.type," ")}}function K(l,n){if(l&1&&(i(0,"div"),a(1),_(2,"date"),t()),l&2){let e=n.$implicit;r(),m(" ",x(2,1,e.from,"EEE, dd MMM, y")," ")}}function Q(l,n){if(l&1&&(i(0,"div"),a(1),_(2,"date"),t()),l&2){let e=n.$implicit;r(),m(" ",x(2,1,e.to,"EEE, dd MMM, y")," ")}}function X(l,n){if(l&1&&(i(0,"div"),a(1),t()),l&2){let e=n.$implicit,o=f(2);r(),m(" ",o.calculateDays(e.from,e.to)," ")}}function Z(l,n){if(l&1&&(i(0,"div")(1,"span",15),a(2),t()()),l&2){let e=n.$implicit;r(),d("ngClass",O(2,G,e.status==="Approved",e.status==="Pending",e.status==="Rejected")),r(),h(e.status)}}function ee(l,n){if(l&1){let e=A();i(0,"button",19),g("click",function(){v(e);let p=f().$implicit,s=f(2);return y(s.openModal(p))}),S(1,"i",20),t()}}function te(l,n){if(l&1&&(i(0,"div"),c(1,ee,2,0,"button",18),t()),l&2){let e=n.$implicit;r(),d("ngIf",e.status==="Pending")}}function ie(l,n){if(l&1&&(i(0,"tr",15)(1,"td",16),a(2),t(),i(3,"td",16),a(4),t(),i(5,"td",16),a(6),_(7,"date"),t(),i(8,"td",16),c(9,J,2,1,"div",17),t(),i(10,"td",16),c(11,K,3,4,"div",17),t(),i(12,"td",16),c(13,Q,3,4,"div",17),t(),i(14,"td",16),c(15,X,2,1,"div",17),t(),i(16,"td",16),c(17,Z,3,6,"div",17),t(),i(18,"td",16),c(19,te,2,1,"div",17),t()()),l&2){let e=n.$implicit,o=n.index;d("ngClass",F(13,z,o%2!=0)),r(2),h(o+1),r(2),h(e.name),r(2),m(" ",x(7,10,e.leaveRequestedDate,"dd-MM-yyyy")," "),r(3),d("ngForOf",e.leaveApplications),r(2),d("ngForOf",e.leaveApplications),r(2),d("ngForOf",e.leaveApplications),r(2),d("ngForOf",e.leaveApplications),r(2),d("ngForOf",e.leaveApplications),r(2),d("ngForOf",e.leaveApplications)}}function ne(l,n){if(l&1){let e=A();i(0,"div",21)(1,"div",22)(2,"h2",23),a(3,"Manage Leave Application"),t(),i(4,"div")(5,"p",24)(6,"strong"),a(7,"Name:"),t(),a(8),t(),i(9,"p",24)(10,"strong"),a(11,"Leave Type:"),t(),a(12),t(),i(13,"p",24)(14,"strong"),a(15,"From:"),t(),a(16),_(17,"date"),t(),i(18,"p",24)(19,"strong"),a(20,"To:"),t(),a(21),_(22,"date"),t()(),i(23,"div",25)(24,"button",26),g("click",function(){v(e);let p=f();return y(p.changeApplicationStatus("Rejected"))}),S(25,"i",27),a(26," Reject "),t(),i(27,"button",28),g("click",function(){v(e);let p=f();return y(p.changeApplicationStatus("Approved"))}),S(28,"i",29),a(29," Approve "),t()(),i(30,"button",30),g("click",function(){v(e);let p=f();return y(p.closeModal())}),S(31,"i",31),t()()()}if(l&2){let e=f();r(8),m(" ",e.selectedApplication==null?null:e.selectedApplication.username," "),r(4),m(" ",e.selectedApplication==null?null:e.selectedApplication.type," "),r(4),m(" ",x(17,4,e.selectedApplication==null?null:e.selectedApplication.from,"EEE, dd-mm-yyyy")," "),r(5),m(" ",x(22,7,e.selectedApplication==null?null:e.selectedApplication.to,"EEE, dd-mm-yyyy")," ")}}var H=class l{users=E.users;filteredUsers=[...this.users];leaveStatusFilter="";isModalOpen=!1;selectedApplication=null;ngOnInit(){this.filterByStatus("")}filterByStatus(n){n?this.filteredUsers=this.users.filter(e=>e.leaveApplications.some(o=>o.status===n)).map(e=>(e.leaveApplications.sort((o,p)=>{let s=new Date(o.from);return new Date(p.from).getTime()-s.getTime()}),e)).sort((e,o)=>{let p=new Date(e.leaveRequestedDate);return new Date(o.leaveRequestedDate).getTime()-p.getTime()}):this.filteredUsers=[...this.users].map(e=>(e.leaveApplications.sort((o,p)=>{let s=new Date(o.from);return new Date(p.from).getTime()-s.getTime()}),e)).sort((e,o)=>{let p=new Date(e.leaveRequestedDate);return new Date(o.leaveRequestedDate).getTime()-p.getTime()})}openModal(n){this.selectedApplication=n,this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.selectedApplication=null}changeApplicationStatus(n){this.selectedApplication&&(this.selectedApplication.status=n,this.closeModal())}calculateDays(n,e){let o=E.publicHolidays,p=new Date(n),s=new Date(e),u=new Date(p),D=0;for(;u<=s;){let U=u.getDay(),W=this.isHoliday(u,o),Y=this.isSecondSaturday(u);U!==0&&!W&&!Y&&D++,u.setDate(u.getDate()+1)}return D}isHoliday(n,e){for(let o of e){let p=new Date(o.startDate),s=new Date(o.endDate);if(n>=p&&n<=s)return!0}return!1}isSecondSaturday(n){let p=(6-new Date(n.getFullYear(),n.getMonth(),1).getDay()+7)%7+1+7;return n.getDate()===p}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-application"]],standalone:!0,features:[T],decls:39,vars:3,consts:[[1,"p-4","md:p-8","bg-gray-100"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","md:text-2xl","font-semibold","text-gray-800"],[1,"border","p-2","rounded",3,"ngModelChange","change","ngModel"],["value",""],["value","Pending"],["value","Approved"],["value","Rejected"],[1,"overflow-x-auto","bg-white","shadow-lg","rounded-lg","max-w-full",2,"max-height","600px"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-200"],[1,""],[1,"px-4","py-2"],[3,"ngClass",4,"ngFor","ngForOf"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",4,"ngIf"],[3,"ngClass"],[1,"border","px-4","py-2","text-center"],[4,"ngFor","ngForOf"],["class","text-blue-500 px-4 py-2 text-center rounded",3,"click",4,"ngIf"],[1,"text-blue-500","px-4","py-2","text-center","rounded",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50"],[1,"bg-white","p-6","rounded","shadow-lg","max-w-md","w-full","relative"],[1,"text-xl","font-bold","mb-4"],[1,"mb-2"],[1,"mt-4","flex","justify-between","items-center"],[1,"bg-red-500","text-white","px-4","py-2","rounded","mr-2","flex","items-center",3,"click"],[1,"fa-solid","fa-times","mr-2"],[1,"bg-green-500","text-white","px-4","py-2","rounded","mr-2","flex","items-center",3,"click"],[1,"fa-solid","fa-check","mr-2"],[1,"absolute","top-[-10px]","right-[-10px]","h-7","w-7","flex","items-center","justify-center","bg-red-600","text-white","hover:bg-red-500","rounded-full","transition-colors","duration-300",3,"click"],[1,"fa-solid","fa-xmark"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"p",2),a(3," Leave Applications "),t(),i(4,"div")(5,"select",3),M("ngModelChange",function(s){return C(o.leaveStatusFilter,s)||(o.leaveStatusFilter=s),s}),g("change",function(){return o.filterByStatus(o.leaveStatusFilter)}),i(6,"option",4),a(7,"All"),t(),i(8,"option",5),a(9,"Pending"),t(),i(10,"option",6),a(11,"Approved"),t(),i(12,"option",7),a(13,"Rejected"),t()()()(),i(14,"div",8)(15,"table",9)(16,"thead",10)(17,"tr",11)(18,"th",12),a(19,"SR NO."),t(),i(20,"th",12),a(21,"Name"),t(),i(22,"th",12),a(23,"Leave Request"),t(),i(24,"th",12),a(25,"Leave Type"),t(),i(26,"th",12),a(27,"From"),t(),i(28,"th",12),a(29,"To"),t(),i(30,"th",12),a(31,"Days"),t(),i(32,"th",12),a(33,"Status"),t(),i(34,"th",12),a(35,"Actions"),t()()(),i(36,"tbody"),c(37,ie,20,15,"tr",13),t()(),c(38,ne,32,10,"div",14),t()()),e&2&&(r(5),w("ngModel",o.leaveStatusFilter),r(32),d("ngForOf",o.filteredUsers),r(),d("ngIf",o.isModalOpen))},dependencies:[R,I,k,B,N,$,P,L,q,V,j]})};export{H as ApplicationComponent};
